<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Document</title>
</head>
<body>
<h2>Upload a Book or Document</h2>
<form method="POST" enctype="multipart/form-data" id="uploadForm">
    <input type="file" name="file" id="fileInput" accept=".pdf,.txt,.doc,.docx" required>
    <button type="submit">Upload</button>
</form>
<p id="msg"></p>
<a href="{{ url_for('corpus_page') }}">Back to Corpus</a>

<script>
const form = document.getElementById("uploadForm");
const msg = document.getElementById("msg");
form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const file = document.getElementById("fileInput").files[0];
    if(!file) return;

    const formData = new FormData();
    formData.append("file", file);

    const res = await fetch("/upload", { method:"POST", body:formData });
    const data = await res.json();
    msg.textContent = data.message;
    msg.style.color = data.success ? "green" : "red";
});
</script>
</body>
</html>
